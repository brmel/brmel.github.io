{{- if .Site.Params.newsletter.enabled }}
<div class="newsletter-signup">
    <div class="newsletter-container">
        <div class="newsletter-content">
            <h3 class="newsletter-title">{{ .Site.Params.newsletter.title | default "Stay Updated" }}</h3>
            <p class="newsletter-description">{{ .Site.Params.newsletter.description | default "Get the latest updates delivered to your inbox." }}</p>
        </div>
        
        {{- if eq .Site.Params.newsletter.provider "buttondown" }}
        <form
            action="https://buttondown.email/api/emails/embed-subscribe/{{ .Site.Params.newsletter.buttondown_username }}"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://buttondown.email/{{ .Site.Params.newsletter.buttondown_username }}', 'popupwindow')"
            class="newsletter-form"
        >
            <div class="newsletter-input-group">
                <input
                    type="email"
                    name="email"
                    placeholder="{{ .Site.Params.newsletter.placeholder | default "Enter your email address" }}"
                    required
                    class="newsletter-input"
                />
                <input type="hidden" value="1" name="embed" />
                <button type="submit" class="newsletter-button">
                    {{ .Site.Params.newsletter.button_text | default "Subscribe" }}
                </button>
            </div>
        </form>
        {{- end }}
        
        <p class="newsletter-privacy">
            <small>No spam, unsubscribe anytime. Read our <a href="/privacy">privacy policy</a>.</small>
        </p>
    </div>
</div>
{{- end }}
